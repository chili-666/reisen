{"ast":null,"code":"import _regeneratorRuntime from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/TripsDetail.js\";\nimport React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Strapi from \"strapi-sdk-javascript/build/main\";\nimport { withRouter } from \"react-router\";\nimport DetailHeroCarousel from \"./DetailCompononents/DetailHeroCarousel\";\nimport DetailStoerer from \"./DetailCompononents/DetailStoerer\";\nimport DetailServices from \"./DetailCompononents/DetailServices\";\nimport ItineraryCard from \"./DetailCompononents/ItineraryCard\";\nimport { Markdown } from \"react-showdown\";\nimport ReactMarkdown from \"react-markdown\";\nconst apiUrl = 'https://strapi.luis-backt-und-kocht.de'; //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n\nconst strapi = new Strapi(apiUrl);\n\nclass TripsDetail extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      trip: [],\n      loading: true,\n      trip_id: \"\"\n    };\n  }\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return strapi.request('POST', '/graphql', {\n              data: {\n                query: \"query { trip (id: \\\"\".concat(_this.props.match.params.tripId, \"\\\") {\\n                title\\n                id\\n  trip_dates {\\n    id\\n    departure\\n    return\\n  }\\n  short_description\\n  long_description\\n  pics {\\n    url\\n  }\\n  priceAdult\\n  priceReduced\\n  itinerary {\\n      title\\n      description\\n      id\\n  }\\n  services {\\n      serviceName\\n      id\\n  }\\n  LangesTExtfeld\\n}}\")\n              }\n            });\n\n          case 3:\n            response = _context.sent;\n\n            //console.log(\"responseDdtail\",response.data.trip.pics[0])\n            _this.setState({\n              trip: response.data.trip,\n              loading: false,\n              trip_id: _this.props.match.params.tripId\n            });\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n\n          case 10:\n            ;\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 7]]);\n    }))();\n  }\n\n  render() {\n    console.log(\"Bilder für Carousel\", this.state.trip.pics);\n    var longMarkdown = this.state.trip.long_description;\n    this.state.loading ? console.log(\"DetailState loading\") : console.log(\"DetailState\", this.state.trip);\n    var itinerary = this.state.loading ? null : this.state.trip.itinerary.map(day => /*#__PURE__*/React.createElement(ItineraryCard, {\n      key: day.id,\n      title: day.title,\n      description: day.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }));\n    var heroPic = this.state.loading ? null : this.state.trip.pics.map(pic => (console.log(\"TripPic\", pic.url), pic.url));\n    console.log(\"HEroPic\", heroPic);\n    var heroSlider = this.state.loading ? \"Loading\" : /*#__PURE__*/React.createElement(DetailHeroCarousel, {\n      images: heroPic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 59\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shadow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hero has-background-white is-small \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hero-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, heroSlider), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container is-fluid has-background-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bordered rounded needs-margin-bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \" is-size-1  has-text-black has-text-left  is-padded-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, this.state.trip.title))), /*#__PURE__*/React.createElement(DetailStoerer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-two-thirds has-text-justified\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ReactMarkdown, {\n      source: longMarkdown,\n      escapeHtml: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-one-thirds\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, this.state.loading ? null : /*#__PURE__*/React.createElement(DetailServices, {\n      services: this.state.trip.services,\n      priceAdult: this.state.trip.priceAdult,\n      priceRed: this.state.trip.priceReduced,\n      all: this.state.trip,\n      tripId: this.state.trip_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 50\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"is-size-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 35\n      }\n    }, \"Ihr Reiseablauf\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns is-multiline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, itinerary))));\n  }\n\n}\n\nexport default withRouter(TripsDetail);","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/TripsDetail.js"],"names":["React","useParams","Strapi","withRouter","DetailHeroCarousel","DetailStoerer","DetailServices","ItineraryCard","Markdown","ReactMarkdown","apiUrl","strapi","TripsDetail","Component","constructor","state","trip","loading","trip_id","componentDidMount","request","data","query","props","match","params","tripId","response","setState","console","error","render","log","pics","longMarkdown","long_description","itinerary","map","day","id","title","description","heroPic","pic","url","heroSlider","services","priceAdult","priceReduced"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {useParams} from \"react-router-dom\";\nimport Strapi from \"strapi-sdk-javascript/build/main\"\nimport {withRouter} from \"react-router\"\nimport DetailHeroCarousel from \"./DetailCompononents/DetailHeroCarousel\"\nimport DetailStoerer from \"./DetailCompononents/DetailStoerer\"\nimport DetailServices from \"./DetailCompononents/DetailServices\"\nimport ItineraryCard from \"./DetailCompononents/ItineraryCard\"\nimport {Markdown} from\"react-showdown\"\nimport ReactMarkdown from \"react-markdown\"\n\n    const apiUrl= 'https://strapi.luis-backt-und-kocht.de';\n    //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n    const strapi = new Strapi(apiUrl)\n  \nclass TripsDetail extends React.Component {\n        constructor() {\n            super()\n            this.state= {\n            trip:[],\n            loading: true,\n            trip_id: \"\"\n            }\n        }\n    \n       async componentDidMount() {\n    try{\n        const response = await strapi.request('POST', '/graphql', {\n          data: {\n            query: `query { trip (id: \"${this.props.match.params.tripId}\") {\n                title\n                id\n  trip_dates {\n    id\n    departure\n    return\n  }\n  short_description\n  long_description\n  pics {\n    url\n  }\n  priceAdult\n  priceReduced\n  itinerary {\n      title\n      description\n      id\n  }\n  services {\n      serviceName\n      id\n  }\n  LangesTExtfeld\n}}`\n          }\n\n        });\n        //console.log(\"responseDdtail\",response.data.trip.pics[0])\n        this.setState({ \n          trip: response.data.trip,\n          loading: false,\n        trip_id: this.props.match.params.tripId})\n    } catch(err) {\n      console.error(err) };\n    }\n  \n    render() {\n        console.log(\"Bilder für Carousel\", this.state.trip.pics)\n        var longMarkdown = this.state.trip.long_description;\n        this.state.loading ? console.log(\"DetailState loading\") : console.log(\"DetailState\", this.state.trip)\n\n        var itinerary = this.state.loading ? null : this.state.trip.itinerary.map(day => (\n            <ItineraryCard key={day.id} title={day.title} description={day.description}/>\n        ))\n        \n        var heroPic = this.state.loading ? null : this.state.trip.pics.map(pic => (\n            console.log(\"TripPic\", pic.url ),\n            pic.url\n            ));\n        console.log(\"HEroPic\", heroPic)    \n        var heroSlider = this.state.loading ? \"Loading\" : <DetailHeroCarousel images={heroPic}/>\n        return ( \n            <div className=\"shadow\">\n        <div className=\"hero has-background-white is-small \"> \n        \n        <div className=\"hero-body\">\n        {heroSlider}\n        </div>\n        <div className=\"container is-fluid has-background-white\">\n        <div className=\"bordered rounded needs-margin-bottom\">\n        <h1 className=\"\n\n        \n                is-size-1 \n                has-text-black\n               \n                has-text-left \n                is-padded-10\">\n                <strong>{this.state.trip.title}</strong></h1>\n           \n                \n                </div>\n        \n        \n\n           \n        <DetailStoerer />\n        <div className=\"columns\">\n            <div className=\"column is-two-thirds has-text-justified\">\n                <ReactMarkdown source={ longMarkdown } escapeHtml={ false } />\n                </div>\n            <div className=\"column is-one-thirds\">\n                    {this.state.loading ? null : <DetailServices services={this.state.trip.services} priceAdult={this.state.trip.priceAdult} priceRed={this.state.trip.priceReduced} all={this.state.trip} tripId={this.state.trip_id}/>}\n            </div>\n        </div>\n        <div  className=\"section\"><h1 className=\"is-size-3\">Ihr Reiseablauf</h1></div>\n        <div className=\"columns is-multiline\">\n       {itinerary}\n         \n    \n            </div>\n            </div>\n            </div>\n            </div>\n            )  \n    }\n            \n}\n\nexport default withRouter(TripsDetail)"]},"metadata":{},"sourceType":"module"}