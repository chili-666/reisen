{"ast":null,"code":"import _regeneratorRuntime from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js\";\nimport React from \"react\";\nimport BookingDetails from \"./booking/BookingDetails\";\nimport AccountAdress from \"./account/AccountAdress\";\nimport Companion from \"./booking/Companions\";\nimport BookingAddServices from \"./booking/BookingAddServices\";\nimport BookingButton from \"./booking/BookingButton\";\nimport { getToken } from \"./utils\";\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\";\nimport { GiConsoleController } from \"react-icons/gi\";\nconst apiUrl = 'https://strapi.luis-backt-und-kocht.de'; //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n\nconst strapi = new Strapi(apiUrl); //console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      companions: false,\n      accountKeys: [],\n      token: null,\n      user: null\n    };\n  }\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this.setState({\n              token: Cookie.get('jwt')\n            });\n\n          case 2:\n            if (_this.state.token !== null) {\n              // authenticate the token on the server and place set user object\n              fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n                headers: {\n                  Authorization: \"Bearer \".concat(_this.state.token)\n                }\n              }).then( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n                  var userData, email;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return res.json();\n\n                      case 2:\n                        userData = _context.sent;\n                        console.log(\"ANtwor for MEE\", userData);\n                        _context.next = 6;\n                        return _this.setState({\n                          user: userData\n                        });\n\n                      case 6:\n                        console.log(\"USERDATASTATE\", _this.state.user);\n                        email = _this.state.user.email;\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n            }\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n\n  render() {\n    const userFelder = [\"vorname\", \"nachname\", \"Strasse\", \"hausnummer\", \"plz\", \"ort\", \"telefon\", \"mobil\", \"anrede\"];\n    console.log(\"USERSTATE\", this.state.user);\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, \"Willkommen zur\\xFCck\");\n  }\n\n}\n\nexport default MeinKonto;","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js"],"names":["React","BookingDetails","AccountAdress","Companion","BookingAddServices","BookingButton","getToken","Cookie","Strapi","GiConsoleController","apiUrl","strapi","MeinKonto","Component","constructor","state","companions","accountKeys","token","user","componentDidMount","setState","get","fetch","headers","Authorization","then","res","json","userData","console","log","email","render","userFelder"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,kBAAP,MAA+B,8BAA/B;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,SAAQC,QAAR,QAAuB,SAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,kCAAnB;AACA,SAASC,mBAAT,QAAoC,gBAApC;AAGA,MAAMC,MAAM,GAAE,wCAAd,C,CACA;;AACA,MAAMC,MAAM,GAAG,IAAIH,MAAJ,CAAWE,MAAX,CAAf,C,CACA;AACA;;AAEA,MAAME,SAAN,SAAwBZ,KAAK,CAACa,SAA9B,CAAwC;AACrCC,EAAAA,WAAW,GAAG;AACT;AADS,SAGbC,KAHa,GAGL;AACJC,MAAAA,UAAU,EAAE,KADR;AAEJC,MAAAA,WAAW,EAAE,EAFT;AAGJC,MAAAA,KAAK,EAAE,IAHH;AAIJC,MAAAA,IAAI,EAAE;AAJF,KAHK;AAEZ;;AAQIC,EAAAA,iBAAN,GAA0B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACf,KAAI,CAACC,QAAL,CAAc;AAChBH,cAAAA,KAAK,EAAEX,MAAM,CAACe,GAAP,CAAW,KAAX;AADS,aAAd,CADe;;AAAA;AAIrB,gBAAI,KAAI,CAACP,KAAL,CAAWG,KAAX,KAAqB,IAAzB,EAA+B;AAC3B;AACAK,cAAAA,KAAK,CAAC,iDAAD,EAAoD;AACvDC,gBAAAA,OAAO,EAAE;AACPC,kBAAAA,aAAa,mBAAY,KAAI,CAACV,KAAL,CAAWG,KAAvB;AADN;AAD8C,eAApD,CAAL,CAIGQ,IAJH;AAAA,oFAIQ,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACmBA,GAAG,CAACC,IAAJ,EADnB;;AAAA;AACEC,wBAAAA,QADF;AAEJC,wBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,QAA9B;AAFI;AAAA,+BAGE,KAAI,CAACR,QAAL,CAAc;AAChBF,0BAAAA,IAAI,EAAEU;AADU,yBAAd,CAHF;;AAAA;AAMJC,wBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B,KAAI,CAAChB,KAAL,CAAWI,IAAxC;AACQa,wBAAAA,KAPJ,GAOa,KAAI,CAACjB,KAAL,CAAWI,IAPxB,CAOIa,KAPJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJR;;AAAA;AAAA;AAAA;AAAA;AAYL;;AAlBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAmB5B;;AAICC,EAAAA,MAAM,GAAG;AACL,UAAMC,UAAU,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,SAAxB,EAAmC,YAAnC,EAAiD,KAAjD,EAAwD,KAAxD,EAA+D,SAA/D,EAA0E,OAA1E,EAAmF,QAAnF,CAAnB;AAEAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB,KAAKhB,KAAL,CAAWI,IAApC;AACD,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAP;AAGF;;AAzCqC;;AA4CxC,eAAeP,SAAf","sourcesContent":["import React from \"react\"\nimport BookingDetails from \"./booking/BookingDetails\"\nimport AccountAdress from \"./account/AccountAdress\"\nimport Companion from \"./booking/Companions\"\nimport BookingAddServices from \"./booking/BookingAddServices\"\nimport BookingButton from \"./booking/BookingButton\"\nimport {getToken} from \"./utils\"\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\"\nimport { GiConsoleController } from \"react-icons/gi\"\n\n\nconst apiUrl= 'https://strapi.luis-backt-und-kocht.de';\n//const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\nconst strapi = new Strapi(apiUrl);\n//console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n   constructor() {\n        super()\n    }\n    state = {\n        companions: false,\n        accountKeys: [],\n        token: null,\n        user: null\n    }\n  \n   async componentDidMount() {\n        await this.setState({\n            token: Cookie.get('jwt') \n        })\n        if (this.state.token !== null) {\n            // authenticate the token on the server and place set user object\n            fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n              headers: {\n                Authorization: `Bearer ${this.state.token}`,\n              },\n            }).then(async (res) => {\n                const userData = await res.json()\n                console.log(\"ANtwor for MEE\", userData)\n                await this.setState({\n                    user: userData\n                })\n                console.log(\"USERDATASTATE\", this.state.user)\n                const { email} = this.state.user\n    })}\n}\n    \n\n\n  render() {\n      const userFelder = [\"vorname\", \"nachname\", \"Strasse\", \"hausnummer\", \"plz\", \"ort\", \"telefon\", \"mobil\", \"anrede\" ]\n     \n      console.log(\"USERSTATE\", this.state.user)\n     return <h1>\n         Willkommen zur√ºck \n     </h1>\n  }\n}\n\nexport default MeinKonto"]},"metadata":{},"sourceType":"module"}