{"ast":null,"code":"import _regeneratorRuntime from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/cart/ShoppingCart.js\";\nimport React from \"react\";\nimport { FaBackspace } from \"react-icons/fa\";\nimport CartCustomer from \"./CartCustomer\";\nimport { setCart, getCart, getToken } from \"../utils\";\nimport { Link } from \"react-router-dom\";\nimport Strapi from \"strapi-sdk-javascript\";\nimport Cookie from \"js-cookie\";\nconst apiUrl = 'https://strapi.luis-backt-und-kocht.de'; //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n\nconst strapi = new Strapi(apiUrl);\n\nclass ShoppingCart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      booking: false,\n      persist: false,\n      items: [],\n      token: \"\"\n    };\n    this.handleBooking = this.handleBooking.bind(this);\n  }\n\n  componentWillMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _this.setState({\n              loading: false,\n              items: getCart(),\n              token: Cookie.get('jwt')\n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }\n\n  handleBooking(event) {\n    this.setState({\n      booking: true\n    }); //console.log(\"Booking!\", this.state.booking)\n\n    document.getElementById(\"bookingButton\").style.display = \"none\";\n    document.getElementById(\"bookingAblauf\").style.display = \"block\";\n  }\n\n  render() {\n    console.log(\"ShoppingCART\", this.state);\n    {\n      this.state.loading ? console.log(\"Laden\") : // let tripId = this.state.trip.id\n      // localStorage.setItem(\"tripId\", \"test\")\n      console.log(\"LINK_PROPS\", this.state);\n      var totalAdult = this.state.items.adults * this.state.items.trip.priceAdult;\n      const _this$state$items = this.state.items,\n            kids = _this$state$items.kids,\n            adults = _this$state$items.adults;\n      const _this$state$items$tri = this.state.items.trip,\n            priceAdult = _this$state$items$tri.priceAdult,\n            priceReduced = _this$state$items$tri.priceReduced,\n            title = _this$state$items$tri.title;\n      var totalKids = kids * priceReduced;\n      var grandTotal = totalKids + totalAdult;\n      const selectedTripDate = this.state.items.tripDate;\n      const dates = this.state.items.trip.trip_dates;\n      console.log(\"SelectedTripDate\", selectedTripDate);\n      console.log(\"Dates\", dates.length); //  console.log(\"Const Dates\", dates)\n\n      var bookedDate;\n\n      for (let i = 0; i < dates.length; i++) {\n        console.log(\"DATES_FOR\", dates[i].id, selectedTripDate); //bookedDate =  dates.find(element => element.id === selectedTripDate)\n\n        if (dates[i].id != selectedTripDate) {} else {\n          bookedDate = dates[i];\n        }\n      }\n\n      var abreise = new Date(bookedDate.departure);\n      var abreiseJahr = abreise.getFullYear();\n      var abreiseMonat = abreise.getMonth() + 1;\n      var abreiseTag = abreise.getDate();\n      var returnDatum = new Date(bookedDate.return);\n      var returnJahr = returnDatum.getFullYear();\n      var returnMonat = returnDatum.getMonth() + 1;\n      var returnTag = returnDatum.getDate();\n    } //   console.log(\"Finden\", dates.find(element => element.id === selectedTripDate))\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container is-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"Ihre Reisebuchung\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-halfwidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-fullwidth is-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }\n    }, \"Reise\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, \"Abreise\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, \"R\\xFCckreise\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, this.state.items.trip.title), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, abreiseTag, \".\", abreiseMonat, \".\", abreiseJahr), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 25\n      }\n    }, returnTag, \".\", returnMonat, \".\", returnJahr)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 46\n      }\n    }, \"Reisebeschreibung:\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 72\n      }\n    }), \" \", this.state.items.trip.short_description), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: \"1em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box is-hidden-mobile\",\n      id: \"bookingAblauf\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"has-text-weight-semibold is-family-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 32\n      }\n    }, \"Buchungsablauf\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"is-size-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 36\n      }\n    }, \"Melden Sie sich an oder legen Sie ein neues Kundenkonto an.\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 37\n      }\n    }, \"Geben Sie die Daten Ihrer Mitreisenden an und pr\\xFCfen Sie Ihre eigenen Daten\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 37\n      }\n    }, \"W\\xE4hlen Sie Ihre gew\\xFCnschte Zahlungsart\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 37\n      }\n    }, \"Im Anschluss an die Bestellung erhalten Sie eine Bestellbest\\xE4tigung per Email\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 37\n      }\n    }, \"Etwas sp\\xE4ter erhalten Sie Ihre Reiseunterlagen ebenfalls per Email\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-halfwidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-fullwidth is-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, \"Reisende\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, \"Preis pro Person\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, \"Gesamt\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, this.state.items.adults, \" Erwachsene(r)\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, this.state.items.trip.priceAdult, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, totalAdult, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaBackspace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }))), this.state.items.kids > 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 55\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, this.state.items.kids, \" Kinder \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, priceReduced, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, totalKids, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaBackspace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"flex-end\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-striped is-narrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 29\n      }\n    }, \"Ihr Reisepreis\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 33\n      }\n    }, grandTotal, \" \\u20AC\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 27\n      }\n    }), this.state.token ? /*#__PURE__*/React.createElement(Link, {\n      to: \"/meine-buchung\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button is-primary mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 53\n      }\n    }, \"Buchen\")) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleBooking,\n      className: \"button is-primary mb-4\",\n      id: \"bookingButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 27\n      }\n    }, \"Jetzt buchen\"), /*#__PURE__*/React.createElement(CartCustomer, {\n      className: \"has-background-black\",\n      show: this.state.booking,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 27\n      }\n    }))))));\n  }\n\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/cart/ShoppingCart.js"],"names":["React","FaBackspace","CartCustomer","setCart","getCart","getToken","Link","Strapi","Cookie","apiUrl","strapi","ShoppingCart","Component","constructor","state","loading","booking","persist","items","token","handleBooking","bind","componentWillMount","setState","get","event","document","getElementById","style","display","render","console","log","totalAdult","adults","trip","priceAdult","kids","priceReduced","title","totalKids","grandTotal","selectedTripDate","tripDate","dates","trip_dates","length","bookedDate","i","id","abreise","Date","departure","abreiseJahr","getFullYear","abreiseMonat","getMonth","abreiseTag","getDate","returnDatum","return","returnJahr","returnMonat","returnTag","short_description","paddingTop","justifyContent"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {FaBackspace} from \"react-icons/fa\"\nimport CartCustomer from\"./CartCustomer\"\nimport {setCart, getCart, getToken } from \"../utils\";\nimport {Link} from \"react-router-dom\";\nimport Strapi from \"strapi-sdk-javascript\";\nimport Cookie from \"js-cookie\";\n\nconst apiUrl= 'https://strapi.luis-backt-und-kocht.de';\n//const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\nconst strapi = new Strapi(apiUrl)\n\nclass ShoppingCart extends React.Component {\n\n  constructor() {\n        super();\n        this.state = {\n            loading:false,\n            booking: false,\n            persist: false,\n            items: [],\n            token: \"\"\n        }\n        this.handleBooking = this.handleBooking.bind(this)\n    }\n\n   async componentWillMount() {\n        await this.setState({\n            loading:false,\n            items: getCart(),\n            token: Cookie.get('jwt')\n        })\n  \n    }\n\n    handleBooking(event) {\n        this.setState({\n            booking: true\n            \n        })\n        //console.log(\"Booking!\", this.state.booking)\n        document.getElementById(\"bookingButton\").style.display =\"none\"\n        document.getElementById(\"bookingAblauf\").style.display =\"block\"\n\n    }\n\n \n\n    render(){\n        console.log(\"ShoppingCART\", this.state)\n        {this.state.loading ?\n        console.log(\"Laden\") : \n       // let tripId = this.state.trip.id\n       // localStorage.setItem(\"tripId\", \"test\")\n       console.log(\"LINK_PROPS\", this.state)\n        var totalAdult = this.state.items.adults * this.state.items.trip.priceAdult\n        const {kids, adults} = this.state.items\n        const {priceAdult, priceReduced, title} = this.state.items.trip\n        var totalKids = kids * priceReduced\n        var grandTotal = totalKids + totalAdult\n        const selectedTripDate = this.state.items.tripDate\n        const dates = this.state.items.trip.trip_dates\n       console.log(\"SelectedTripDate\", selectedTripDate)\n       console.log(\"Dates\", dates.length)\n      //  console.log(\"Const Dates\", dates)\n        var bookedDate;\n        for ( let i=0; i < dates.length; i++) {\n            console.log(\"DATES_FOR\", dates[i].id, selectedTripDate)\n            //bookedDate =  dates.find(element => element.id === selectedTripDate)\n            if (dates[i].id != selectedTripDate){\n                \n            } else {\n                bookedDate = dates[i]\n            }\n            \n        }\n        var abreise = new Date(bookedDate.departure)\n        var abreiseJahr = abreise.getFullYear()\n        var abreiseMonat = abreise.getMonth()+1\n        var abreiseTag = abreise.getDate()\n        var    returnDatum = new Date(bookedDate.return)\n        var    returnJahr = returnDatum.getFullYear()\n        var    returnMonat = returnDatum.getMonth()+1\n        var    returnTag = returnDatum.getDate()\n    }\n     //   console.log(\"Finden\", dates.find(element => element.id === selectedTripDate))\n        return (\n            \n            <div className=\"container is-fluid\">\n               \n                <div className=\"box\">\n                <div className=\"title\">\n                Ihre Reisebuchung\n                </div>\n                  <div className=\"columns\">\n                    <div className=\"column is-halfwidth\">\n                        <table className=\"table is-fullwidth is-striped\">\n                        <thead>\n                        <tr>\n                        <th>Reise</th>\n                        <th>Abreise</th>\n                        <th>Rückreise</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr>\n                        <td>{this.state.items.trip.title}</td>\n                        <td>{abreiseTag}.{abreiseMonat}.{abreiseJahr}</td>\n                        <td>{returnTag}.{returnMonat}.{returnJahr}</td>\n                        </tr>\n                        </tbody>\n                        </table>\n                        <div className=\"box\"><b>Reisebeschreibung:</b> <br/> {this.state.items.trip.short_description}\n                        </div>\n                        <div style={{paddingTop:\"1em\"}}>\n                            <div className=\"box is-hidden-mobile\" id=\"bookingAblauf\" style={{display:\"none\"}}>\n                               <h3 className=\"has-text-weight-semibold is-family-secondary\">Buchungsablauf</h3>\n                               <ul className=\"is-size-7\">\n                                   <li>Melden Sie sich an oder legen Sie ein neues Kundenkonto an.</li>\n                                    <li>Geben Sie die Daten Ihrer Mitreisenden an und prüfen Sie Ihre eigenen Daten</li>\n                                    <li>Wählen Sie Ihre gewünschte Zahlungsart</li>\n                                    <li>Im Anschluss an die Bestellung erhalten Sie eine Bestellbestätigung per Email</li>\n                                    <li>Etwas später erhalten Sie Ihre Reiseunterlagen ebenfalls per Email</li> \n                                </ul>\n                            </div>\n                        </div>\n                </div>\n                <div className=\"column is-halfwidth\">\n                <table className=\"table is-fullwidth is-striped\">\n                    <thead>\n                    <tr>\n                    <th>Reisende</th>\n                    <th>Preis pro Person</th>\n                    <th>Gesamt</th>\n                    <th></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        <tr>    \n                        <td>{this.state.items.adults} Erwachsene(r)</td>\n                        <td>{this.state.items.trip.priceAdult} €</td>\n                        <td>{totalAdult} €</td>\n                        <td><FaBackspace /></td>\n                        </tr>\n                        {this.state.items.kids > 0 && <tr >    \n        <td>{this.state.items.kids} Kinder </td>\n                        <td>{priceReduced} €</td>\n                        <td>{totalKids} €</td>\n                        <td><FaBackspace /></td>\n                        </tr>\n    }\n                    </tbody>\n                </table>\n              \n                  \n                            <div style={{display:\"flex\", justifyContent:\"flex-end\"}}>\n                            <table className=\"table is-striped is-narrow\">\n                            <thead>\n                            <tr>\n                            <th></th>\n                            <th>Ihr Reisepreis</th>\n                            </tr>\n                            </thead>\n                                <tbody>\n                                <tr>\n                                <td></td>\n                                <td>{grandTotal} €</td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        \n                            \n                          </div>\n                          <br />\n                          {this.state.token ?\n                          <Link to=\"/meine-buchung\"><button className=\"button is-primary mb-4\">Buchen</button></Link>\n                          :\n                          <div>\n                          <button onClick={this.handleBooking} className=\"button is-primary mb-4\" id=\"bookingButton\">Jetzt buchen</button>\n                          <CartCustomer className=\"has-background-black\" show={this.state.booking}/>\n                          </div>\n                            }       \n                          </div>\n                          </div>\n                          \n                          \n                          \n                          \n                       </div>\n                        \n            </div>\n        )\n    }\n\n}\n\nexport default ShoppingCart"]},"metadata":{},"sourceType":"module"}