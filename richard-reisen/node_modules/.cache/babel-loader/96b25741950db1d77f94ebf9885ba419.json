{"ast":null,"code":"import _regeneratorRuntime from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js\";\nimport React from \"react\";\nimport BookingDetails from \"./booking/BookingDetails\";\nimport AccountAdress from \"./account/AccountAdress\";\nimport Companion from \"./booking/Companions\";\nimport BookingAddServices from \"./booking/BookingAddServices\";\nimport BookingButton from \"./booking/BookingButton\";\nimport { getToken } from \"./utils\";\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\";\nimport { GiConsoleController } from \"react-icons/gi\";\nconst apiUrl = 'https://strapi.luis-backt-und-kocht.de'; //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n\nconst strapi = new Strapi(apiUrl); //console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      companions: false,\n      accountKeys: [],\n      token: null,\n      user: null\n    };\n  }\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this.setState({\n              token: Cookie.get('jwt')\n            });\n\n          case 2:\n            if (_this.state.token !== null) {\n              // authenticate the token on the server and place set user object\n              fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n                headers: {\n                  Authorization: \"Bearer \".concat(_this.state.token)\n                }\n              }).then( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n                  var userData;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return res.json();\n\n                      case 2:\n                        userData = _context.sent;\n                        console.log(\"ANtwor for MEE\", userData);\n                        _context.next = 6;\n                        return _this.setState({\n                          user: userData\n                        });\n\n                      case 6:\n                        console.log(\"USERDATASTATE\", _this.state.user);\n\n                        _this.setState({\n                          loading: false\n                        });\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n            }\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n\n  render() {\n    const _this$state$user = this.state.user,\n          vorname = _this$state$user.vorname,\n          nachname = _this$state$user.nachname,\n          Strasse = _this$state$user.Strasse,\n          hausnummer = _this$state$user.hausnummer,\n          plz = _this$state$user.plz,\n          ort = _this$state$user.ort,\n          telefon = _this$state$user.telefon,\n          mobil = _this$state$user.mobil,\n          anrede = _this$state$user.anrede; // const {email} = this.state.user\n\n    console.log(\"EMAIL\", email);\n    console.log(\"USERSTATE\", this.state.user);\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, \"Willkommen zur\\xFCck \", this.state.loading ? \"Lädt noch\" : this.state.user.vorname);\n  }\n\n}\n\nexport default MeinKonto;","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js"],"names":["React","BookingDetails","AccountAdress","Companion","BookingAddServices","BookingButton","getToken","Cookie","Strapi","GiConsoleController","apiUrl","strapi","MeinKonto","Component","constructor","state","loading","companions","accountKeys","token","user","componentDidMount","setState","get","fetch","headers","Authorization","then","res","json","userData","console","log","render","vorname","nachname","Strasse","hausnummer","plz","ort","telefon","mobil","anrede","email"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport BookingDetails from \"./booking/BookingDetails\"\nimport AccountAdress from \"./account/AccountAdress\"\nimport Companion from \"./booking/Companions\"\nimport BookingAddServices from \"./booking/BookingAddServices\"\nimport BookingButton from \"./booking/BookingButton\"\nimport {getToken} from \"./utils\"\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\"\nimport { GiConsoleController } from \"react-icons/gi\"\n\n\nconst apiUrl= 'https://strapi.luis-backt-und-kocht.de';\n//const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\nconst strapi = new Strapi(apiUrl);\n//console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n   constructor() {\n        super()\n    }\n    state = {\n        loading:true,\n        companions: false,\n        accountKeys: [],\n        token: null,\n        user: null\n    }\n  \n   async componentDidMount() {\n        await this.setState({\n            token: Cookie.get('jwt') \n        })\n        if (this.state.token !== null) {\n            // authenticate the token on the server and place set user object\n            fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n              headers: {\n                Authorization: `Bearer ${this.state.token}`,\n              },\n            }).then(async (res) => {\n                const userData = await res.json()\n                console.log(\"ANtwor for MEE\", userData)\n                await this.setState({\n                    user: userData,\n                    \n                })\n                console.log(\"USERDATASTATE\", this.state.user)\n                \n                this.setState({\n                    loading:false\n                })\n    })}\n}\n    \n\n\n  render() {\n      const {vorname, nachname, Strasse, hausnummer, plz, ort, telefon, mobil, anrede } = this.state.user\n      // const {email} = this.state.user\n      console.log(\"EMAIL\", email)\n      console.log(\"USERSTATE\", this.state.user)\n     return <h1>\n         Willkommen zurück {this.state.loading ? \"Lädt noch\" : this.state.user.vorname}\n     </h1>\n  }\n}\n\nexport default MeinKonto"]},"metadata":{},"sourceType":"module"}