{"ast":null,"code":"import _slicedToArray from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/cart/ShoppingCart.js\";\nimport React from \"react\";\nimport { FaBackspace } from \"react-icons/fa\";\nimport CartCustomer from \"./CartCustomer\";\nimport { setCart, getCart } from \"../utils\";\n\nclass ShoppingCart extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      booking: false,\n      persist: false\n    };\n    this.handleBooking = this.handleBooking.bind(this);\n  }\n\n  componentWillMount() {\n    getCart; // console.log(\"Props\", this.props)\n    // console.log(\"MeinKontoKeys\", localStorage.getItem(\"keys\"))\n    // console.log(\"MeinKonto\", localStorage.getItem(\"username\"))\n\n    let localStorageKeys = [];\n    localStorageKeys.push(localStorage.getItem(\"keys\").split(\",\"));\n    localStorageKeys.push(localStorage.getItem(\"cartKeys\").split(\",\")); //let temp = localStorageKeys.split(\",\")\n    //console.log(\"LOCALSTORAGEKEYS\", localStorageKeys)\n\n    for (let o = 0; o < localStorageKeys.length; o++) {\n      for (let i = 0; i < localStorageKeys[o].length; i++) {\n        console.log(\"Key für Storage\", localStorageKeys[o][i]);\n        console.log(\"From Storagekeys\", localStorage.getItem(localStorageKeys[o][i]));\n        let key = localStorageKeys[o][i];\n        let value = localStorage.getItem(localStorageKeys[o][i]);\n        this.setState({\n          [key]: value,\n          persist: true\n        });\n        console.log(\"This.state\", this.state);\n      }\n    } // set the data in state and use it through the component\n    //localStorage.clear();\n    // removing the data from localStorage.  Since if user clicks for another invoice it overrides this data\n\n  }\n\n  componentDidMount() {\n    //  if (this.statepersist) {console.log(\"Cart geladen\")} else {\n    let cartKeys = []; //cartKeys.push(Object.keys(this.props.location.state.trip))\n    // localStorage.setItem(\"cartKeys\", cartKeys[0])\n\n    for (var _i = 0, _Object$entries = Object.entries(this.props.location.state.trip); _i < _Object$entries.length; _i++) {\n      const _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            key = _Object$entries$_i[0],\n            value = _Object$entries$_i[1];\n\n      let cart = \"trip_\";\n      let concatKey = cart.concat(key);\n      cartKeys.push(concatKey); // console.log(\"Für Local Cart\", cartKeys)\n\n      localStorage.setItem(concatKey, value);\n    }\n\n    for (var _i2 = 0, _Object$entries2 = Object.entries(this.props.location.state); _i2 < _Object$entries2.length; _i2++) {\n      const _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n            key = _Object$entries2$_i[0],\n            value = _Object$entries2$_i[1];\n\n      let cart = \"trip_\";\n      let concatKey = cart.concat(key);\n      cartKeys.push(concatKey); // console.log(\"Für Local Cart\", cartKeys)\n\n      localStorage.setItem(concatKey, value);\n    }\n\n    localStorage.setItem(\"cartKeys\", cartKeys);\n    let localStorageKeys = [];\n    localStorageKeys.push(localStorage.getItem(\"trip_id\").split(\",\")); //let temp = localStorageKeys.split(\",\")\n    //console.log(\"LOCALSTORAGEKEYS_CART\", localStorage.getItem(\"cartKeys\"))\n    // setCart(this.props.location.state) \n    //   }\n  }\n\n  handleBooking(event) {\n    this.setState({\n      booking: true\n    }); //console.log(\"Booking!\", this.state.booking)\n\n    document.getElementById(\"bookingButton\").style.display = \"none\";\n    document.getElementById(\"bookingAblauf\").style.display = \"block\";\n  }\n\n  render() {\n    // let tripId = this.state.trip.id\n    // localStorage.setItem(\"tripId\", \"test\")\n    // console.log(\"LINK_PROPS\", this.props.location.state.trip.id)\n    var totalAdult = this.props.location.state.adults * this.props.location.state.trip.priceAdult;\n    const _this$props$location$ = this.props.location.state,\n          kids = _this$props$location$.kids,\n          adults = _this$props$location$.adults;\n    const _this$props$location$2 = this.props.location.state.trip,\n          priceAdult = _this$props$location$2.priceAdult,\n          priceReduced = _this$props$location$2.priceReduced,\n          title = _this$props$location$2.title;\n    var totalKids = kids * priceReduced;\n    var grandTotal = totalKids + totalAdult;\n    const selectedTripDate = this.props.location.state.tripDate;\n    const dates = this.props.location.state.trip.trip_dates; //   console.log(\"SelectedTripDate\", selectedTripDate)\n    //  console.log(\"Const Dates\", dates)\n\n    var bookedDate;\n\n    for (var i = 0; i < dates.length; i++) {\n      bookedDate = dates.find(element => element.id === selectedTripDate);\n    }\n\n    var abreise = new Date(bookedDate.departure);\n    var abreiseJahr = abreise.getFullYear();\n    var abreiseMonat = abreise.getMonth() + 1;\n    var abreiseTag = abreise.getDate();\n    var returnDatum = new Date(bookedDate.return);\n    var returnJahr = returnDatum.getFullYear();\n    var returnMonat = returnDatum.getMonth() + 1;\n    var returnTag = returnDatum.getDate(); //   console.log(\"Finden\", dates.find(element => element.id === selectedTripDate))\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container is-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"Ihre Reisebuchung\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"columns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-halfwidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-fullwidth is-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, \"Reise\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, \"Abreise\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, \"R\\xFCckreise\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, title), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }, abreiseTag, \".\", abreiseMonat, \".\", abreiseJahr), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 25\n      }\n    }, returnTag, \".\", returnMonat, \".\", returnJahr)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 46\n      }\n    }, \"Reisebeschreibung:\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 72\n      }\n    }), \" \", this.props.location.state.trip.short_description), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: \"1em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box is-hidden-mobile\",\n      id: \"bookingAblauf\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"has-text-weight-semibold is-family-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 32\n      }\n    }, \"Buchungsablauf\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"is-size-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 36\n      }\n    }, \"Melden Sie sich an oder legen Sie ein neues Kundenkonto an.\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 37\n      }\n    }, \"Geben Sie die Daten Ihrer Mitreisenden an und pr\\xFCfen Sie Ihre eigenen Daten\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 37\n      }\n    }, \"W\\xE4hlen Sie Ihre gew\\xFCnschte Zahlungsart\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 37\n      }\n    }, \"Im Anschluss an die Bestellung erhalten Sie eine Bestellbest\\xE4tigung per Email\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 37\n      }\n    }, \"Etwas sp\\xE4ter erhalten Sie Ihre Reiseunterlagen ebenfalls per Email\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"column is-halfwidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-fullwidth is-striped\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, \"Reisende\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, \"Preis pro Person\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, \"Gesamt\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }, this.props.location.state.adults, \" Erwachsene(r)\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, this.props.location.state.trip.priceAdult, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, totalAdult, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaBackspace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }))), kids > 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 38\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, kids, \" Kinder \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, priceReduced, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    }, totalKids, \" \\u20AC\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaBackspace, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 29\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"flex-end\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table is-striped is-narrow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \"Ihr Reisepreis\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 33\n      }\n    }, grandTotal, \" \\u20AC\"))))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleBooking,\n      className: \"button is-primary mb-4\",\n      id: \"bookingButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 27\n      }\n    }, \"Jetzt buchen\"), /*#__PURE__*/React.createElement(CartCustomer, {\n      className: \"has-background-black\",\n      show: this.state.booking,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 27\n      }\n    })))));\n  }\n\n}\n\nexport default ShoppingCart;","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/cart/ShoppingCart.js"],"names":["React","FaBackspace","CartCustomer","setCart","getCart","ShoppingCart","Component","constructor","state","booking","persist","handleBooking","bind","componentWillMount","localStorageKeys","push","localStorage","getItem","split","o","length","i","console","log","key","value","setState","componentDidMount","cartKeys","Object","entries","props","location","trip","cart","concatKey","concat","setItem","event","document","getElementById","style","display","render","totalAdult","adults","priceAdult","kids","priceReduced","title","totalKids","grandTotal","selectedTripDate","tripDate","dates","trip_dates","bookedDate","find","element","id","abreise","Date","departure","abreiseJahr","getFullYear","abreiseMonat","getMonth","abreiseTag","getDate","returnDatum","return","returnJahr","returnMonat","returnTag","short_description","paddingTop","justifyContent"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {FaBackspace} from \"react-icons/fa\"\nimport CartCustomer from\"./CartCustomer\"\nimport {setCart, getCart } from \"../utils\";\n\nclass ShoppingCart extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            booking: false,\n            persist: false\n        }\n        this.handleBooking = this.handleBooking.bind(this)\n    }\n\n    componentWillMount() {\n        getCart\n        // console.log(\"Props\", this.props)\n        // console.log(\"MeinKontoKeys\", localStorage.getItem(\"keys\"))\n        // console.log(\"MeinKonto\", localStorage.getItem(\"username\"))\n        let localStorageKeys = []\n         localStorageKeys.push(localStorage.getItem(\"keys\").split(\",\"))\n         localStorageKeys.push(localStorage.getItem(\"cartKeys\").split(\",\"))\n         //let temp = localStorageKeys.split(\",\")\n        //console.log(\"LOCALSTORAGEKEYS\", localStorageKeys)\n        \n        for (let o = 0; o < localStorageKeys.length; o++) {\n         \n         for (let i =0; i < localStorageKeys[o].length; i++) {\n             console.log(\"Key für Storage\", localStorageKeys[o][i])\n            console.log(\"From Storagekeys\", localStorage.getItem(localStorageKeys[o][i]))\n             let key = localStorageKeys[o][i]\n             let value = localStorage.getItem(localStorageKeys[o][i])\n             this.setState({\n                 [key] : value,\n                persist: true\n             })\n         console.log(\"This.state\", this.state)    \n         }\n     }\n         // set the data in state and use it through the component\n         //localStorage.clear();\n         // removing the data from localStorage.  Since if user clicks for another invoice it overrides this data\n      }\n    \n    componentDidMount() {\n      //  if (this.statepersist) {console.log(\"Cart geladen\")} else {\n       let cartKeys = []\n         //cartKeys.push(Object.keys(this.props.location.state.trip))\n         // localStorage.setItem(\"cartKeys\", cartKeys[0])\n        for (const [key, value] of Object.entries(this.props.location.state.trip)) {\n            \n            let cart = \"trip_\"\n            let concatKey = cart.concat(key)\n            cartKeys.push(concatKey)\n           // console.log(\"Für Local Cart\", cartKeys)\n            localStorage.setItem(concatKey, value);\n          }\n          for (const [key, value] of Object.entries(this.props.location.state)) {\n            \n            let cart = \"trip_\"\n            let concatKey = cart.concat(key)\n            cartKeys.push(concatKey)\n           // console.log(\"Für Local Cart\", cartKeys)\n            localStorage.setItem(concatKey, value);\n          }\n          localStorage.setItem(\"cartKeys\", cartKeys)\n          let localStorageKeys = []\n          localStorageKeys.push(localStorage.getItem(\"trip_id\").split(\",\"))\n          //let temp = localStorageKeys.split(\",\")\n         //console.log(\"LOCALSTORAGEKEYS_CART\", localStorage.getItem(\"cartKeys\"))\n        // setCart(this.props.location.state) \n     //   }\n    }\n\n    handleBooking(event) {\n        this.setState({\n            booking: true\n            \n        })\n        //console.log(\"Booking!\", this.state.booking)\n        document.getElementById(\"bookingButton\").style.display =\"none\"\n        document.getElementById(\"bookingAblauf\").style.display =\"block\"\n\n    }\n\n \n\n    render(){\n       // let tripId = this.state.trip.id\n       // localStorage.setItem(\"tripId\", \"test\")\n       // console.log(\"LINK_PROPS\", this.props.location.state.trip.id)\n        var totalAdult = this.props.location.state.adults * this.props.location.state.trip.priceAdult\n        const {kids, adults} = this.props.location.state\n        const {priceAdult, priceReduced, title} = this.props.location.state.trip\n        var totalKids = kids * priceReduced\n        var grandTotal = totalKids + totalAdult\n        const selectedTripDate = this.props.location.state.tripDate\n        const dates = this.props.location.state.trip.trip_dates\n     //   console.log(\"SelectedTripDate\", selectedTripDate)\n      //  console.log(\"Const Dates\", dates)\n        var bookedDate;\n        for ( var i=0; i < dates.length; i++) {\n            bookedDate =  dates.find(element => element.id === selectedTripDate)\n        }\n        var abreise = new Date(bookedDate.departure)\n        var abreiseJahr = abreise.getFullYear()\n        var abreiseMonat = abreise.getMonth()+1\n        var abreiseTag = abreise.getDate()\n        var    returnDatum = new Date(bookedDate.return)\n        var    returnJahr = returnDatum.getFullYear()\n        var    returnMonat = returnDatum.getMonth()+1\n        var    returnTag = returnDatum.getDate()\n\n     //   console.log(\"Finden\", dates.find(element => element.id === selectedTripDate))\n        return (\n\n            <div className=\"container is-fluid\">\n               \n                <div className=\"box\">\n                <div className=\"title\">\n                Ihre Reisebuchung\n                </div>\n                  <div className=\"columns\">\n                    <div className=\"column is-halfwidth\">\n                        <table className=\"table is-fullwidth is-striped\">\n                        <thead>\n                        <tr>\n                        <th>Reise</th>\n                        <th>Abreise</th>\n                        <th>Rückreise</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr>\n                        <td>{title}</td>\n                        <td>{abreiseTag}.{abreiseMonat}.{abreiseJahr}</td>\n                        <td>{returnTag}.{returnMonat}.{returnJahr}</td>\n                        </tr>\n                        </tbody>\n                        </table>\n                        <div className=\"box\"><b>Reisebeschreibung:</b> <br/> {this.props.location.state.trip.short_description}\n                        </div>\n                        <div style={{paddingTop:\"1em\"}}>\n                            <div className=\"box is-hidden-mobile\" id=\"bookingAblauf\" style={{display:\"none\"}}>\n                               <h3 className=\"has-text-weight-semibold is-family-secondary\">Buchungsablauf</h3>\n                               <ul className=\"is-size-7\">\n                                   <li>Melden Sie sich an oder legen Sie ein neues Kundenkonto an.</li>\n                                    <li>Geben Sie die Daten Ihrer Mitreisenden an und prüfen Sie Ihre eigenen Daten</li>\n                                    <li>Wählen Sie Ihre gewünschte Zahlungsart</li>\n                                    <li>Im Anschluss an die Bestellung erhalten Sie eine Bestellbestätigung per Email</li>\n                                    <li>Etwas später erhalten Sie Ihre Reiseunterlagen ebenfalls per Email</li> \n                                </ul>\n                            </div>\n                        </div>\n                </div>\n                <div className=\"column is-halfwidth\">\n                <table className=\"table is-fullwidth is-striped\">\n                    <thead>\n                    <tr>\n                    <th>Reisende</th>\n                    <th>Preis pro Person</th>\n                    <th>Gesamt</th>\n                    <th></th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        <tr>    \n                        <td>{this.props.location.state.adults} Erwachsene(r)</td>\n                        <td>{this.props.location.state.trip.priceAdult} €</td>\n                        <td>{totalAdult} €</td>\n                        <td><FaBackspace /></td>\n                        </tr>\n                        {kids > 0 && <tr >    \n        <td>{kids} Kinder </td>\n                        <td>{priceReduced} €</td>\n                        <td>{totalKids} €</td>\n                        <td><FaBackspace /></td>\n                        </tr>\n    }\n                    </tbody>\n                </table>\n              \n                  \n                            <div style={{display:\"flex\", justifyContent:\"flex-end\"}}>\n                            <table className=\"table is-striped is-narrow\">\n                            <thead>\n                            <tr>\n                            <th></th>\n                            <th>Ihr Reisepreis</th>\n                            </tr>\n                            </thead>\n                                <tbody>\n                                <tr>\n                                <td></td>\n                                <td>{grandTotal} €</td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        \n                            \n                          </div>\n                          <br />\n                          <button onClick={this.handleBooking} className=\"button is-primary mb-4\" id=\"bookingButton\">Jetzt buchen</button>\n                          \n                          <CartCustomer className=\"has-background-black\" show={this.state.booking}/></div>\n                          </div>\n                          \n                          \n                          \n                          \n                       </div>\n                        \n            </div>\n        )\n    }\n\n}\n\nexport default ShoppingCart"]},"metadata":{},"sourceType":"module"}