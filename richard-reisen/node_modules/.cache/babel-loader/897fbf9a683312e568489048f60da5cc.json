{"ast":null,"code":"import _regeneratorRuntime from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/chili_666/projects/reisen/richard-reisen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js\";\nimport React from \"react\";\nimport BookingDetails from \"./booking/BookingDetails\";\nimport AccountAdress from \"./account/AccountAdress\";\nimport Companion from \"./booking/Companions\";\nimport BookingAddServices from \"./booking/BookingAddServices\";\nimport BookingButton from \"./booking/BookingButton\";\nimport { getToken } from \"./utils\";\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\";\nimport { GiConsoleController } from \"react-icons/gi\";\nconst apiUrl = 'https://strapi.luis-backt-und-kocht.de'; //const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\n\nconst strapi = new Strapi(apiUrl); //console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      companions: false,\n      accountKeys: [],\n      token: null,\n      user: null\n    };\n  }\n\n  componentDidMount() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _this.setState({\n              token: Cookie.get('jwt')\n            });\n\n          case 2:\n            if (_this.state.token !== null) {\n              // authenticate the token on the server and place set user object\n              fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n                headers: {\n                  Authorization: \"Bearer \".concat(_this.state.token)\n                }\n              }).then( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(res) {\n                  var userData;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return res.json();\n\n                      case 2:\n                        userData = _context.sent;\n                        console.log(\"ANtwor for MEE\", userData);\n                        _context.next = 6;\n                        return _this.setState({\n                          user: userData\n                        });\n\n                      case 6:\n                        console.log(\"USERDATASTATE\", _this.state);\n\n                        _this.setState({\n                          loading: false\n                        });\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n            }\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n\n  render() {\n    let formular;\n    const userData = this.state.loading ? console.log(\"TEST lädt\") : Object.keys(this.state.user);\n    console.log(\"USERDATA\", userData);\n\n    if (this.state.loading != true) {//  for (let i = 0; i < userData.length; i++) {\n      //      console.log(\"Neuer Versuch\", this.state.user[userData[i]] )\n      //      formular = this.state.user[userData[i]]\n      //  }\n    } //const formular = this.state.loading ? \"LÄDT NOCH\" : Object.entries(this.state.user).map((entry, i) => (\n    //    console.log(\"ENTRY\", entry[i], entry[i+1])\n    //<div className=\"has-background-danger\" key={i}> key: {entry[i]} Name {entry[i+1]}</div>\n    //))\n\n    /*   for (const [key, value] of Object.entries(this.state.user)) {\n           console.log(`${key}: ${value}`);\n           formular = <div className=\"has-background-grey-darker\">{key}</div>\n           console.log(\"FORM\", formular)\n       }\n    }*/\n\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        marginTop: \"1em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 6\n      }\n    }, \"Willkommen zur\\xFCck \", this.state.loading ? \"Lädt noch\" : this.state.user.vorname), formular));\n  }\n\n}\n\nexport default MeinKonto;","map":{"version":3,"sources":["/home/chili_666/projects/reisen/richard-reisen/src/components/MeinKonto.js"],"names":["React","BookingDetails","AccountAdress","Companion","BookingAddServices","BookingButton","getToken","Cookie","Strapi","GiConsoleController","apiUrl","strapi","MeinKonto","Component","constructor","state","loading","companions","accountKeys","token","user","componentDidMount","setState","get","fetch","headers","Authorization","then","res","json","userData","console","log","render","formular","Object","keys","marginTop","vorname"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport BookingDetails from \"./booking/BookingDetails\"\nimport AccountAdress from \"./account/AccountAdress\"\nimport Companion from \"./booking/Companions\"\nimport BookingAddServices from \"./booking/BookingAddServices\"\nimport BookingButton from \"./booking/BookingButton\"\nimport {getToken} from \"./utils\"\nimport Cookie from \"js-cookie\";\nimport Strapi from \"strapi-sdk-javascript/build/main\"\nimport { GiConsoleController } from \"react-icons/gi\"\n\n\nconst apiUrl= 'https://strapi.luis-backt-und-kocht.de';\n//const apiUrl = `${process.env.REACT_APP_BACKEND_URL}`\nconst strapi = new Strapi(apiUrl);\n//console.log(\"URL\", apiUrl)\n//console.log(\"strapi\", strapi+'/graphql'\n\nclass MeinKonto extends React.Component {\n   constructor() {\n        super()\n    }\n    state = {\n        loading:true,\n        companions: false,\n        accountKeys: [],\n        token: null,\n        user: null\n    }\n  \n   async componentDidMount() {\n        await this.setState({\n            token: Cookie.get('jwt') \n        })\n        if (this.state.token !== null) {\n            // authenticate the token on the server and place set user object\n            fetch('https://strapi.luis-backt-und-kocht.de/users/me', {\n              headers: {\n                Authorization: `Bearer ${this.state.token}`,\n              },\n            }).then(async (res) => {\n                const userData = await res.json()\n                console.log(\"ANtwor for MEE\", userData)\n                await this.setState({\n                    user: userData,\n                    \n                })\n                console.log(\"USERDATASTATE\", this.state)\n                \n                this.setState({\n                    loading:false\n                })\n               \n    })}\n}\n    \n\n\n  render() {\n    let formular\n    const userData = this.state.loading ? console.log(\"TEST lädt\") : Object.keys(this.state.user)\n    console.log(\"USERDATA\", userData)\n    if (this.state.loading != true) {\n    //  for (let i = 0; i < userData.length; i++) {\n    //      console.log(\"Neuer Versuch\", this.state.user[userData[i]] )\n    //      formular = this.state.user[userData[i]]\n    //  }\n      }\n\n    //const formular = this.state.loading ? \"LÄDT NOCH\" : Object.entries(this.state.user).map((entry, i) => (\n    //    console.log(\"ENTRY\", entry[i], entry[i+1])\n        //<div className=\"has-background-danger\" key={i}> key: {entry[i]} Name {entry[i+1]}</div>\n    //))\n    \n /*   for (const [key, value] of Object.entries(this.state.user)) {\n        console.log(`${key}: ${value}`);\n        formular = <div className=\"has-background-grey-darker\">{key}</div>\n        console.log(\"FORM\", formular)\n    }\n}*/\n     return (\n     <div className=\"container\" style={{marginTop:\"1em\"}}>\n         <div className=\"box\">\n     <h1>\n         Willkommen zurück {this.state.loading ? \"Lädt noch\" : this.state.user.vorname}\n     </h1>\n     {formular}\n     </div>\n     </div>\n     )\n  }\n}\n\nexport default MeinKonto"]},"metadata":{},"sourceType":"module"}